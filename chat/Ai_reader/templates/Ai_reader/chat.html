{% extends "users/base.html" %}

{% block title %} Chat {% endblock %}

{% load static %}

{% block body %}
<script src="{% static 'app.js' %}"></script>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-3">
            <div style="position: absolute; top: 55px; left: 0px; width: 15%; height: 100%;">
                <div style="background-color: #123CA9; height: calc(100%);">
                    <h1 style="color: white; text-align: center;">All Chats</h1>
                    <hr>
                    <a href="{% url 'users:profile' %}" class="btn btn-primary">Profile</a>
                </div>
            </div>
        </div>
        <div class="col-md-9" style="position: absolute; bottom: 0; left: 15%; top: 55px; width: 85%; height: 100%; background: linear-gradient(to bottom, rgba(18, 26, 213, 0.74) 0%, rgba(174, 18, 213, 0.81) 100%); padding-top: 20px; color: white;">
            <h2 style="text-align: center;">Current Chat: In develop</h2>
            <ul>
                <li>In develop</li>
                <!-- Додайте повідомлення тут -->
            </ul>
            <form method="post" action="{% url 'chat:answer' %}" enctype="multipart/form-data">
                {% csrf_token %}
                <label for="fileSelect">Виберіть файл</label>
                <select id="fileSelect" name="file">
                    {% for file in user_files %}
                        <option value="{{ file.id }}">{{ file.file.name }}</option>
                    {% endfor %}
                </select>
                <br>
                <label for="messageInput">Напишіть повідомлення</label>
                <textarea id="messageInput" name="message" rows="4" cols="50"></textarea>
                <br>
                <button type="submit">Надіслати</button>
            </form>
        </div>
    </div>
</div>
<script>
    function uploadFile() {
        const fileInput = document.getElementById('fileInput');
        const file = fileInput.files[0];
        const formData = new FormData();
        formData.append('file', file);

        // Отримання JSON з даними і відправлення на сервер
        fetch('/upload_file/', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            console.log(data);
            // Тут можна виконати додаткові дії з отриманими даними, якщо потрібно
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }
</script>

{% endblock %}